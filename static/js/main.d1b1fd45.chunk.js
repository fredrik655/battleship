(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{13:function(e,r,t){},14:function(e,r,t){"use strict";t.r(r);var n=t(0),a=t(1),i=t.n(a),c=t(7),u=t.n(c),o=(t(13),t(4)),s=t(2),l=function(e,r,t){for(var a=[],i=0;i<100;i++)a.push(Object(n.jsx)("div",{className:"game-board-square","data-index":i,onMouseOver:e,onMouseLeave:r,onClick:t},i));return a},d=function(e){return Object(n.jsx)("div",{className:"game-board",children:l(e.onGameSquareHover,e.onGameSquareLeave,e.onClickPlaceShip)})},h=function(e){var r=function(){for(var r=[],t=0;t<e;t++)r.push(null);return[].concat(r)}(),t=function(){for(var r=[],t=0;t<e;t++)r.push(!1);return[].concat(r)}(),n=!1;return{returnShip:function(){return r},returnHit:function(){return t},isSunk:function(){return n},placeShip:function(e){if(e.some((function(e){return e<0})))throw new Error("negative index position");if(e.some((function(e){return e>99})))throw new Error("Index out of bound");if(e.length!==r.length)throw new Error("size mismatch");r=Object(o.a)(e)},hit:function(e){if(r.includes(e)){var a=r.indexOf(e);return t.splice(a,1,!0),t.includes(!1)||(n=!0),!0}return!1}}},f=function(){var e=function(){for(var e=[],r=0;r<100;r++)e.push(null);return[].concat(e)}(),r={carrier:{ship:h(5)},battleship:{ship:h(4)},cruiser:{ship:h(3)},submarine:{ship:h(3)},destroyer:{ship:h(2)}},t=[],n=[],a=function(e){for(var t=0;t<e.length;t++){if(r.carrier.ship.returnShip().includes(e[t]))return!1;if(r.battleship.ship.returnShip().includes(e[t]))return!1;if(r.cruiser.ship.returnShip().includes(e[t]))return!1;if(r.submarine.ship.returnShip().includes(e[t]))return!1;if(r.destroyer.ship.returnShip().includes(e[t]))return!1}return!0};return{returnGameBoard:function(){return e},returnAttacks:function(){return t},returnMisses:function(){return n},returnShips:function(){return r},placeShip:function(e,t){return!!a(t)&&(r[e].ship.placeShip(t),!0)},receiveAttack:function(e){return t.includes(e)?"attacked":(t.push(e),function(e){return!!r.carrier.ship.hit(e)||!!r.battleship.ship.hit(e)||!!r.cruiser.ship.hit(e)||!!r.submarine.ship.hit(e)||!!r.destroyer.ship.hit(e)}(e)?"hit":(n.push(e),"miss"))},allSunk:function(){var e=!0;return r.carrier.ship.isSunk()&&r.battleship.ship.isSunk()&&r.cruiser.ship.isSunk()&&r.submarine.ship.isSunk()&&r.destroyer.ship.isSunk()||(e=!1),e},checkIfPlaced:function(e){return!r[e].ship.returnShip().includes(null)}}},p=function(e,r){var t=e,n=r,a=f();return{returnPlayerNumber:function(){return t},isAi:function(){return n},returnGameBoard:function(){return a},generateAttack:function(){return!0===n&&Math.floor(100*Math.random())}}},b=function(){var e=null,r=null,t=function(t,n,a){for(var i=!1,c=0;!i&&c<10;)i=1===t?e.returnGameBoard().placeShip(n,a):r.returnGameBoard().placeShip(n,a),c++;if(!1===i)throw new Error("cant place ship")},n=function(e,r){if(r){if(e[e.length-1]>99)return!0}else for(var t=0;t<e.length-1;t++){if(9===+e[t].toString().split("").pop())return!0}return!1};return{setUpPlayers:function(){e=p(1,!1),r=p(2,!0)},returnPlayers:function(){return[e,r]},returnGameBoards:function(){return[e.returnGameBoard(),r.returnGameBoard()]},placeShipsRandom:function(){var e=Math.floor(4*Math.random());return e<1?(t(2,"carrier",[2,3,4,5,6]),t(2,"battleship",[45,55,65,75]),t(2,"cruiser",[38,48,58]),t(2,"submarine",[13,14,15]),t(2,"destroyer",[98,99])):e>=1&&e<=2?(t(2,"carrier",[32,42,52,62,72]),t(2,"battleship",[84,85,86,87]),t(2,"cruiser",[29,39,49]),t(2,"submarine",[55,56,57]),t(2,"destroyer",[6,16])):(t(2,"carrier",[91,92,93,94,95]),t(2,"battleship",[58,68,78,88]),t(2,"cruiser",[74,75,76]),t(2,"submarine",[50,51,52]),t(2,"destroyer",[54,64])),!0},calculateIndices:function(e,r,t){var a=[e];if(r)for(var i=1;i<t;i++)a.push(e+10*i);else for(var c=1;c<t;c++)a.push(e+c);return!n(a,r)&&a},placeShip:t,allShipsPlaced:function(){var t=e.returnGameBoard(),n=r.returnGameBoard(),a=!!t.checkIfPlaced("carrier")&&(!!t.checkIfPlaced("battleship")&&(!!t.checkIfPlaced("cruiser")&&(!!t.checkIfPlaced("submarine")&&!!t.checkIfPlaced("destroyer"))));return!0===a&&(a=!!n.checkIfPlaced("carrier")&&(!!n.checkIfPlaced("battleship")&&(!!n.checkIfPlaced("cruiser")&&(!!n.checkIfPlaced("submarine")&&!!n.checkIfPlaced("destroyer"))))),a},returnShipPositions:function(){var t=e.returnGameBoard().returnShips(),n=r.returnGameBoard().returnShips(),a=[],i=[];return Object.keys(t).forEach((function(e){a.push(t[e].ship.returnShip())})),Object.keys(n).forEach((function(e){i.push(n[e].ship.returnShip())})),[a,i]},attackShip:function(t,n){if(1===t)return r.returnGameBoard().receiveAttack(n);for(var a=r.generateAttack();"attacked"===e.returnGameBoard().receiveAttack(a);)a=r.generateAttack();return a},isGameOver:function(){return r.returnGameBoard().allSunk()?[!0,1]:e.returnGameBoard().allSunk()?[!0,2]:[!1,null]}}},m=function(e){return Object(n.jsxs)("div",{id:"interface",children:[Object(n.jsx)("button",{className:"interface-btn",onClick:e.toggleVertical,children:"Vertical"}),Object(n.jsx)("button",{className:"interface-btn",id:"carrier",onClick:e.changeShip,children:"Carrier"}),Object(n.jsx)("button",{className:"interface-btn",id:"battleship",onClick:e.changeShip,children:"Battleship"}),Object(n.jsx)("button",{className:"interface-btn",id:"cruiser",onClick:e.changeShip,children:"Cruiser"}),Object(n.jsx)("button",{className:"interface-btn",id:"submarine",onClick:e.changeShip,children:"Submarine"}),Object(n.jsx)("button",{className:"interface-btn",id:"destroyer",onClick:e.changeShip,children:"Destroyer"}),Object(n.jsx)("button",{className:"interface-btn",id:"start-game-btn",onClick:e.startGame,children:"Start Game"})]})},j=function(e){for(var r=[],t=0;t<100;t++)r.push(Object(n.jsx)("div",{className:"player-game-board-square","data-index":"p".concat(t),"data-ship-id":S(t,e)},"player-game-square-".concat(t)));return r},S=function(e,r){var t=-1;return r.forEach((function(r,n){r.includes(e)&&(t=n)})),t},k=function(e,r){for(var t=[],a=0;a<100;a++)t.push(Object(n.jsx)("div",{className:"ai-game-board-square",onClick:r,"data-index":"a".concat(a),"data-ship-id":S(a,e)},"ai-game-square-".concat(a)));return t},v=function(e){return[Object(n.jsx)("h2",{children:"Sink the enemies ships"}),Object(n.jsxs)("div",{id:"game-board-container",children:[Object(n.jsx)("div",{className:"game-board",children:j(e.positions[0])}),Object(n.jsx)("div",{className:"game-board",children:k(e.positions[1],e.onClickAttack)})]})]},g=function(e){return 1===e?Object(n.jsx)("h2",{children:"You Win!"}):Object(n.jsx)("h2",{children:"Computer Win! You loose"})},O=function(e){return Object(n.jsxs)("div",{id:"game-over-container",children:[g(e.player[1]),Object(n.jsx)("button",{onClick:e.reload,children:"Play Again"})]})},y=function(){var e=Object(a.useState)(!0),r=Object(s.a)(e,2),t=r[0],i=r[1],c=Object(a.useState)(b()),u=Object(s.a)(c,2),l=u[0],h=(u[1],Object(a.useState)(!1)),f=Object(s.a)(h,2),p=f[0],j=f[1],S=Object(a.useState)(5),k=Object(s.a)(S,2),g=k[0],y=k[1],x=Object(a.useState)("carrier"),C=Object(s.a)(x,2),G=C[0],P=C[1],A=Object(a.useState)([]),B=Object(s.a)(A,2),I=B[0],q=B[1],N=Object(a.useState)("#06d6a0"),E=Object(s.a)(N,2),w=E[0],M=E[1],H=Object(a.useState)([!1,null]),V=Object(s.a)(H,2),L=V[0],z=V[1];Object(a.useEffect)((function(){l.setUpPlayers(),l.placeShipsRandom()}),[]);var D=function(){l.allShipsPlaced()&&i(!1)},J=function(e){var r=e.target.getAttribute("data-index"),t=l.calculateIndices(+r,p,g);if(!1!==t){var n=l.returnGameBoards()[0];if(!Q(t)&&!n.checkIfPlaced(G)){var a=Object(o.a)(I);T(t).forEach((function(e){a.push(+e.getAttribute("data-index")),e.style.backgroundColor=w})),q(a),l.placeShip(1,G,t),W(),R(),console.log("here")}}},R=function(){"carrier"===G?(M("#06d6a0"),P("battleship"),y(4)):"battleship"===G?(M("#06d6a0"),P("cruiser"),y(3)):"cruiser"===G?(M("#06d6a0"),P("submarine"),y(3)):"submarine"===G&&(M("#06d6a0"),P("destroyer"),y(2))},U=function(e){var r=+e.target.getAttribute("data-index").split("a")[1],t=l.attackShip(1,r);if("hit"===t?(console.log(e.target),e.target.style.backgroundColor="#ef476f"):"miss"===t&&(e.target.style.opacity=.7),"attacked"!==t){var n=l.attackShip(2),a=document.querySelector('[data-index="p'.concat(n,'"]'));"-1"!==a.getAttribute("data-ship-id")?a.style.backgroundColor="#ef476f":a.style.opacity=.5}var i=l.isGameOver();i[0]&&z(i)},W=function(){document.querySelector("#".concat(G)).style.opacity=.5},Y=function(e){var r=e.target.textContent;"Carrier"===r?(M("#06d6a0"),P("carrier"),y(5)):"Battleship"===r?(M("#06d6a0"),P("battleship"),y(4)):"Cruiser"===r?(M("#06d6a0"),P("cruiser"),y(3)):"Submarine"===r?(M("#06d6a0"),P("submarine"),y(3)):"Destroyer"===r&&(M("#06d6a0"),P("destroyer"),y(2))},F=function(e){var r=e.target;p?(r.textContent="Vertical",j(!1)):(r.textContent="Horizontal",j(!0))},K=function(e){var r=e.target.getAttribute("data-index"),t=l.calculateIndices(+r,p,g);!1!==t&&(Q(t)||T(t).forEach((function(e){"red"!==e.style.backgroundColor&&(e.style.backgroundColor="darkslategray")})))},Q=function(e){var r=!1;return e.forEach((function(e){I.includes(e)&&(r=!0)})),r},T=function(e){var r=document.querySelectorAll(".game-board-square"),t=[];return e.forEach((function(e){t.push(r[e])})),t},X=function(e){Object(o.a)(document.querySelectorAll(".game-board-square")).forEach((function(e){"darkslategray"===e.style.backgroundColor&&(e.style.backgroundColor="#118ab2")}))},Z=function(){window.location.reload()};return Object(n.jsx)("div",{id:"game-container",children:L[0]?Object(n.jsx)(O,{player:L,reload:Z}):t?[Object(n.jsx)(m,{toggleVertical:F,changeShip:Y,startGame:D},"pl-dom"),Object(n.jsx)(d,{onGameSquareHover:K,onGameSquareLeave:X,onClickPlaceShip:J},"gb-dom")]:Object(n.jsx)(v,{positions:l.returnShipPositions(),onClickAttack:U})})};var x=function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(y,{})})};u.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(x,{})}),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.d1b1fd45.chunk.js.map